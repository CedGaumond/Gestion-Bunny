@page "/login"
@using Gestion_Bunny.Modeles
@using Gestion_Bunny.Services
@inject IAuthenticationService AuthenticationService
@inject NavigationManager Navigation

<PageTitle>Login1</PageTitle>
<div class="row g-0 h-100">
    <!-- Image Column -->
    <div class="col-6 h-100">
        <img src="https://www.shutterstock.com/image-photo/flying-wok-ingredients-shrimp-vegetables-600w-2101129093.jpg"
             alt="Login Illustration"
             class="w-100 h-100"
             style="object-fit: cover; object-position: center;">
    </div>
    <div class="col-6 d-flex flex-column justify-content-center align-items-center">
        <img src="images/logo.png" alt="Logo" width="400" height="400" class="mb-4" />

        <EditForm Model="@loginModel" OnValidSubmit="HandleLogin" class="w-75">
            <div class="form-group mb-4">
                <label for="Email" class="form-label fs-5">Email</label>
                <InputText id="Email" 
                           class="form-control form-control-lg rounded-pill" 
                           style="font-size: 1.2rem; padding: 15px 20px; height: 60px;" 
                           @bind-Value="loginModel.Email" />
            </div>
            <div class="form-group mb-4">
                <label for="Password" class="form-label fs-5">Password</label>
                <InputText id="Password" 
                           type="password" 
                           class="form-control form-control-lg rounded-pill" 
                           style="font-size: 1.2rem; padding: 15px 20px; height: 60px;" 
                           @bind-Value="loginModel.Password" />
            </div>
            <div class="d-grid">
                <button type="submit" class="btn btn-outline-danger rounded-pill btn-lg">Login</button>
            </div>

            @if (loginError)
            {
                                <div class="alert alert-danger mt-3">
                                    Invalid email or password.
                                </div>
            }
        </EditForm>
    </div>
</div>

@code {
    private LoginModel loginModel = new LoginModel();
    private bool loginError = false;

    private async Task HandleLogin()
    {
        loginError = false;
        var result = await AuthenticationService.LoginAsync(loginModel.Email, loginModel.Password);
        if (result)
        {
            Navigation.NavigateTo("/");
        }
        else
        {
            loginError = true;
        }
    }
}

<style>
    html, body {
        height: 100%;
        margin: 0;
        padding: 0;
    }
    .form-control-lg {
        font-size: 1.2rem;
        padding: 15px 20px;
        height: 60px;
    }
</style>